{{define "title"}}Profil - AvtotestPrime{{end}}

{{define "content"}}
<div class="page-header">
    <h1><i class="fas fa-user"></i> Profil</h1>
</div>

<div class="profile-card">
    <div class="profile-info">
        <div class="profile-avatar">
            <i class="fas fa-user-circle"></i>
        </div>
        <h2>{{.User.Username}}</h2>
        <p>Ro'yxatdan o'tgan: {{formatDate .User.DateJoined "d.m.Y"}}</p>
        {{if .User.IsStaff}}
        <span class="admin-badge"><i class="fas fa-shield-alt"></i> Admin</span>
        {{end}}
    </div>

    {{if .Success}}
    <div class="alert alert-success">
        <i class="fas fa-check-circle"></i> {{.Success}}
    </div>
    {{end}}
    {{if .Error}}
    <div class="alert alert-danger">
        <i class="fas fa-exclamation-circle"></i> {{.Error}}
    </div>
    {{end}}

    <form method="post" action="/profile/">
        <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
        <div class="form-group">
            <label for="new_username"><i class="fas fa-user"></i> Login</label>
            <input type="text" id="new_username" name="new_username" value="{{.User.Username}}" placeholder="Yangi loginni kiriting">
        </div>
        <div class="form-group">
            <label for="new_password"><i class="fas fa-key"></i> Yangi parol (bo'sh qoldirsa o'zgarmaydi)</label>
            <input type="password" id="new_password" name="new_password" placeholder="Yangi parolni kiriting">
        </div>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Saqlash
        </button>
    </form>
</div>
{{end}}
