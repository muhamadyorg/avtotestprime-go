{{define "title"}}Qidirish - AvtotestPrime{{end}}

{{define "content"}}
<div class="page-header">
    <h1><i class="fas fa-search"></i> Savol qidirish</h1>
</div>

<div class="search-box">
    <form method="get" action="/search/">
        <div class="search-input-group">
            <input type="text" name="q" value="{{.Query}}" placeholder="Savol matni yoki raqamini kiriting..." autofocus>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-search"></i> Qidirish
            </button>
        </div>
    </form>
</div>

{{if .Query}}
<p class="search-result-count">{{len .Questions}} ta natija topildi</p>
{{end}}

<div class="questions-list">
    {{if .Questions}}
    {{range .Questions}}
    {{$q := .}}
    <div class="question-card">
        <div class="question-card-content">
            <div class="question-info">
                <div class="question-number">#{{.Number}}</div>
                <div class="question-text">{{.Text}}</div>
            </div>
            {{if hasImage .Image}}
            <div class="question-thumb" onclick="openImageModal('{{imageURL .Image}}')">
                <img src="{{imageURL .Image}}" alt="Savol rasmi">
            </div>
            {{end}}
        </div>
        <div class="question-variants">
            {{range .VariantsList}}
            <div class="variant {{if eq $q.CorrectAnswer .Letter}}variant-correct{{end}}">
                <span class="variant-letter">{{.Letter}}</span> {{.Text}}
            </div>
            {{end}}
        </div>
        <div class="question-actions">
            <a href="/bookmark/toggle/{{$q.ID}}/" class="btn btn-sm {{if contains $.UserBookmarks $q.ID}}btn-warning{{else}}btn-outline{{end}}" onclick="event.preventDefault(); toggleBookmark(this, {{$q.ID}});">
                <i class="fas fa-bookmark"></i>
            </a>
        </div>
    </div>
    {{end}}
    {{else}}
    <div class="empty-state">
        <i class="fas fa-search"></i>
        <p>{{if .Query}}Hech narsa topilmadi{{else}}Qidirish uchun so'z kiriting{{end}}</p>
    </div>
    {{end}}
</div>
{{end}}
